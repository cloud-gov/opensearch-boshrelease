<% require 'json' %>
<% if(p('cloudfoundry.firehose_events').include? 'ContainerMetric') %>
{
  "attributes": {
    "title": "App - Metrics",
    "hits": 0,
    "description": "",
    "panelsJSON": "<%= JSON.parse(<<'ENDOFFJSON').to_json.gsub(/"/) { '\"' }
      [
        {
          "panelRefName": "panel_0",
          "version": "7.3.0",
          "panelIndex": "fbf2609d-069d-4a94-bece-9616c4bf9f63",
          "gridData": {
            "x": 0,
            "y": 0,
            "w": 36,
            "h": 20,
            "i": "fbf2609d-069d-4a94-bece-9616c4bf9f63"
          },
          "embeddableConfig": {}
        },
        {
          "panelRefName": "panel_1",
          "version": "7.3.0",
          "panelIndex": "cf447345-10f2-4fc1-8eff-85914480904e",
          "gridData": {
            "x": 36,
            "y": 0,
            "w": 12,
            "h": 20,
            "i": "cf447345-10f2-4fc1-8eff-85914480904e"
          },
          "embeddableConfig": {}
        },
        {
          "panelRefName": "panel_2",
          "version": "7.3.0",
          "panelIndex": "62dd09bb-8dc7-468b-867b-15e4a8b0ac31",
          "gridData": {
            "x": 0,
            "y": 20,
            "w": 24,
            "h": 16,
            "i": "62dd09bb-8dc7-468b-867b-15e4a8b0ac31"
          },
          "embeddableConfig": {}
        },
        {
          "panelRefName": "panel_3",
          "version": "7.3.0",
          "panelIndex": "4b6427d3-71b4-4799-96b9-13beedc241f5",
          "gridData": {
            "x": 24,
            "y": 20,
            "w": 24,
            "h": 16,
            "i": "4b6427d3-71b4-4799-96b9-13beedc241f5"
          },
          "embeddableConfig": {}
        },
        {
          "panelRefName": "panel_4",
          "version": "7.3.0",
          "panelIndex": "80314e94-e0fa-4607-a89f-8a320a14b59a",
          "gridData": {
            "x": 0,
            "y": 36,
            "w": 48,
            "h": 20,
            "i": "80314e94-e0fa-4607-a89f-8a320a14b59a"
          },
          "embeddableConfig": {
            "columns": [
              "@cf.app",
              "@cf.app_instance",
              "containermetric.cpu_percentage",
              "containermetric.disk_bytes",
              "containermetric.memory_bytes"
            ],
            "sort": [
              "@timestamp",
              "desc"
            ]
          }
        }
      ]
ENDOFFJSON
  %>",
    "optionsJSON": "{\"darkTheme\":false}",
    "version": 1,
    "timeRestore": false,
    "kibanaSavedObjectMeta": {
      "searchSourceJSON": "<%= JSON.parse(<<'ENDOFFJSON').to_json.gsub(/"/) { '\"' }
      {
        "filter": [
          {
            "query": {
              "query_string": {
                "analyze_wildcard": true,
                "query": "*"
              }
            }
          }
        ]
      }
ENDOFFJSON
  %>"
    }
  },
  "references": [
    {
      "id": "App-METRIC-memory-usage",
      "name": "panel_0",
      "type": "visualization"
    },
    {
      "id": "App-names",
      "name": "panel_1",
      "type": "visualization"
    },
    {
      "id": "App-METRIC-CPU-usage",
      "name": "panel_2",
      "type": "visualization"
    },
    {
      "id": "App-METRIC-disk-usage",
      "name": "panel_3",
      "type": "visualization"
    },
    {
      "id": "app-container-metric",
      "name": "panel_4",
      "type": "search"
    }
  ]
}
<% end %>
