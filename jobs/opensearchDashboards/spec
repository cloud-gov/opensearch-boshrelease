---
name: opensearchDashboards

description: This job runs opensearchDashboards UI

packages:
  - opensearchDashboards

templates:
  bin/opensearchDashboards: bin/opensearchDashboards.sh
  bin/pre-start.erb: bin/pre-start
  bin/post-start.erb: bin/post-start
  config/opensearchDashboards.conf.erb: config/opensearchDashboards.conf
  config/bpm.yml.erb: config/bpm.yml

consumes:
- name: opensearch
  type: opensearch
  optional: true

provides:
- name: opensearchDashboards
  type: opensearchDashboards
  properties:
  - opensearchDashboards.port

properties:
  opensearchDashboards.opensearch.host:
    description: "IP address of opensearch master to send opensearch requests to"
    default: "localhost"
  opensearchDashboards.opensearch.port:
    description: "Port of opensearch master to send opensearch requests to"
    default: "9200"
  opensearchDashboards.opensearch.http.ssl.certificate:
    description: "SSL cert of opensearch for backend"
  opensearchDashboards.opensearch.http.ssl.private_key:
    description: "SSL key of opensearch for backend"
  opensearchDashboards.defaultAppId:
    description: "The default application to load."
    default: "discover"
  opensearchDashboards.index:
    description: "opensearchDashboards uses an index in opensearch to store saved searches, visualizations and dashboards"
    default: ".opensearchDashboards"
  opensearchDashboards.port:
    description: "opensearchDashboards is served by a back end server. This controls which port to use."
    default: 5601
  opensearchDashboards.host:
    description: "This setting specifies the IP address of the back end server."
    default: "0.0.0.0"
  opensearchDashboards.request_timeout:
    description: "Time in milliseconds to wait for responses from the back end or opensearch.  This must be > 0"
    default: 300000
  opensearchDashboards.shard_timeout:
    description: "Time in milliseconds for opensearch to wait for responses from shards. Set to 0 to disable"
    default: 30000
  opensearchDashboards.env:
    description: "a list of arbitrary key-value pairs to be passed on as process environment variables. eg: FOO: 123"
    default: []
  opensearchDashboards.source_files:
    description: "List of files to source in opensearchDashboards control script"
    default: []
  opensearchDashboards.console_enabled:
    description: "Enable opensearchDashboards development console; should be set to `false` in a multi-tenant deployment."
    default: false
  opensearchDashboards.searchprofiler_enabled:
    description: "Enable opensearchDashboards development search profiler; should be set to `false` in a multi-tenant deployment."
    default: false
  opensearchDashboards.grokdebugger_enabled:
    description: "Enable opensearchDashboards development grok debugger; should be set to `false` in a multi-tenant deployment."
    default: false
  opensearchDashboards.apm_enabled:
    description: "Enable opensearchDashboards APM ui; should be set to `false` in a multi-tenant deployment."
    default: false
  opensearchDashboards.reporting_key:
    description: "Define a reporting key to prevent issues with exporting a report in a load balanced scenario."
    default: CloudFoundry123!
  opensearchDashboards.config_options:
    description: "Additional options to append to opensearchDashboards's config.yml (YAML format)."
    default: ~
  opensearchDashboards.plugins:
    description: "a list of key-value pairs of plugins. e.b. opensearchDashboards-auth: /var/vcap/packagaes/opensearchDashboards/opensearchDashboards-auth"
    default: []
  opensearchDashboards.memory_limit:
    description: "Configure the GC in nodejs to treat this number as the available memory for this process. The value is in the form of % of VM memory."
    default: 75
  opensearchDashboards.health.disable_post_start:
    description: Allow node to run post-start script? (true / false)
    default: false
  opensearchDashboards.health.interval:
    description: opensearchDashboards health check interval (seconds)
    default: 5
  opensearchDashboards.health.timeout:
    description: opensearchDashboards health check number of attempts (seconds)
    default: 300