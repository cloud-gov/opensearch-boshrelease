---
name: opensearch-dashboard

description: This job runs opensearch-dashboard UI

packages:
  - opensearch-dashboard

templates:
  bin/opensearch-dashboard: bin/opensearch-dashboard.sh
  bin/pre-start.erb: bin/pre-start
  bin/post-start.erb: bin/post-start
  config/opensearch-dashboard.conf.erb: config/opensearch-dashboard.conf
  config/bpm.yml.erb: config/bpm.yml

consumes:
- name: opensearchsearch
  type: opensearchsearch
  optional: true

provides:
- name: opensearch-dashboard
  type: opensearch-dashboard
  properties:
  - opensearch-dashboard.port

properties:
  opensearch-dashboard.opensearchsearch.host:
    description: "IP address of opensearchsearch master to send opensearchsearch requests to"
    default: "127.0.0.1"
  opensearch-dashboard.opensearchsearch.port:
    description: "Port of opensearchsearch master to send opensearchsearch requests to"
    default: "9200"
  opensearch-dashboard.default_app_id:
    description: "The default application to load."
    default: "discover"
  opensearch-dashboard.opensearch-dashboard_index:
    description: "opensearch-dashboard uses an index in opensearchsearch to store saved searches, visualizations and dashboards"
    default: ".opensearch-dashboard"
  opensearch-dashboard.port:
    description: "opensearch-dashboard is served by a back end server. This controls which port to use."
    default: 5601
  opensearch-dashboard.host:
    description: "This setting specifies the IP address of the back end server."
    default: "0.0.0.0"
  opensearch-dashboard.request_timeout:
    description: "Time in milliseconds to wait for responses from the back end or opensearchsearch.  This must be > 0"
    default: 300000
  opensearch-dashboard.shard_timeout:
    description: "Time in milliseconds for opensearchsearch to wait for responses from shards. Set to 0 to disable"
    default: 30000
  opensearch-dashboard.env:
    description: "a list of arbitrary key-value pairs to be passed on as process environment variables. eg: FOO: 123"
    default: []
  opensearch-dashboard.source_files:
    description: "List of files to source in opensearch-dashboard control script"
    default: []
  opensearch-dashboard.console_enabled:
    description: "Enable opensearch-dashboard development console; should be set to `false` in a multi-tenant deployment."
    default: false
  opensearch-dashboard.searchprofiler_enabled:
    description: "Enable opensearch-dashboard development search profiler; should be set to `false` in a multi-tenant deployment."
    default: false
  opensearch-dashboard.grokdebugger_enabled:
    description: "Enable opensearch-dashboard development grok debugger; should be set to `false` in a multi-tenant deployment."
    default: false
  opensearch-dashboard.apm_enabled:
    description: "Enable opensearch-dashboard APM ui; should be set to `false` in a multi-tenant deployment."
    default: false
  opensearch-dashboard.reporting_key:
    description: "Define a reporting key to prevent issues with exporting a report in a load balanced scenario."
    default: CloudFoundry123!
  opensearch-dashboard.config_options:
    description: "Additional options to append to opensearch-dashboard's config.yml (YAML format)."
    default: ~
  opensearch-dashboard.plugins:
    description: "a list of key-value pairs of plugins. e.b. opensearch-dashboard-auth: /var/vcap/packagaes/opensearch-dashboard/opensearch-dashboard-auth"
    default: []
  opensearch-dashboard.memory_limit:
    description: "Configure the GC in nodejs to treat this number as the available memory for this process. The value is in the form of % of VM memory."
    default: 75
  opensearch-dashboard.health.disable_post_start:
    description: Allow node to run post-start script? (true / false)
    default: false
  opensearch-dashboard.health.interval:
    description: opensearch-dashboard health check interval (seconds)
    default: 5
  opensearch-dashboard.health.timeout:
    description: opensearch-dashboard health check number of attempts (seconds)
    default: 300